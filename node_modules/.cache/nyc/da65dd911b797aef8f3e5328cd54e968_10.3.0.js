"use strict";var cov_26oab8vg6o=function(){var path="C:\\Users\\chadc\\Documents\\git-projects\\infusion\\dist\\src\\infusion-server\\domain-services\\event-handlers\\infusion-proxy-request-handler.js",hash="3cf1792b7a62e4e16cf9514d4daa1d4191d28de8",global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\chadc\\Documents\\git-projects\\infusion\\dist\\src\\infusion-server\\domain-services\\event-handlers\\infusion-proxy-request-handler.js",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:27},end:{line:3,column:67}},"2":{start:{line:4,column:35},end:{line:4,column:72}},"3":{start:{line:7,column:8},end:{line:7,column:23}},"4":{start:{line:8,column:8},end:{line:8,column:29}},"5":{start:{line:12,column:22},end:{line:12,column:121}},"6":{start:{line:13,column:8},end:{line:13,column:34}},"7":{start:{line:14,column:8},end:{line:14,column:47}},"8":{start:{line:17,column:25},end:{line:17,column:102}},"9":{start:{line:18,column:8},end:{line:18,column:30}},"10":{start:{line:19,column:8},end:{line:19,column:65}},"11":{start:{line:19,column:36},end:{line:19,column:61}},"12":{start:{line:20,column:8},end:{line:20,column:48}},"13":{start:{line:20,column:28},end:{line:20,column:46}},"14":{start:{line:23,column:0},end:{line:23,column:66}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:4},end:{line:6,column:5}},loc:{start:{line:6,column:29},end:{line:9,column:5}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:10,column:4},end:{line:10,column:5}},loc:{start:{line:10,column:31},end:{line:15,column:5}},line:10},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:4},end:{line:16,column:5}},loc:{start:{line:16,column:38},end:{line:21,column:5}},line:16},"3":{name:"(anonymous_3)",decl:{start:{line:19,column:23},end:{line:19,column:24}},loc:{start:{line:19,column:34},end:{line:19,column:63}},line:19},"4":{name:"(anonymous_4)",decl:{start:{line:20,column:22},end:{line:20,column:23}},loc:{start:{line:20,column:28},end:{line:20,column:46}},line:20}},branchMap:{"0":{loc:{start:{line:12,column:22},end:{line:12,column:121}},type:"cond-expr",locations:[{start:{line:12,column:46},end:{line:12,column:107}},{start:{line:12,column:110},end:{line:12,column:121}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();++cov_26oab8vg6o.s[0];Object.defineProperty(exports,"__esModule",{value:true});const infusion_context_1=(++cov_26oab8vg6o.s[1],require("../../domain/infusion-context"));const infusion_request_handler_1=(++cov_26oab8vg6o.s[2],require("./infusion-request-handler"));class InfusionProxyRequestHandler{constructor(log,config){++cov_26oab8vg6o.f[0];++cov_26oab8vg6o.s[3];this.log=log;++cov_26oab8vg6o.s[4];this.config=config;}handle(proxyReq,req,res){++cov_26oab8vg6o.f[1];// tslint:disable-next-line:triple-equals
let context=(++cov_26oab8vg6o.s[5],req.context==null?(++cov_26oab8vg6o.b[0][0],new infusion_context_1.InfusionContext(this.log,this.config)):(++cov_26oab8vg6o.b[0][1],req.context));++cov_26oab8vg6o.s[6];context.request.body='';++cov_26oab8vg6o.s[7];this.setupRequestHandler(req,context);}setupRequestHandler(req,context){++cov_26oab8vg6o.f[2];let reqHandler=(++cov_26oab8vg6o.s[8],new infusion_request_handler_1.InfusionRequestHandler(this.log,req,context));++cov_26oab8vg6o.s[9];req.context=context;++cov_26oab8vg6o.s[10];req.on('data',chunk=>{++cov_26oab8vg6o.f[3];++cov_26oab8vg6o.s[11];reqHandler.onData(chunk);});++cov_26oab8vg6o.s[12];req.on('end',()=>{++cov_26oab8vg6o.f[4];++cov_26oab8vg6o.s[13];return reqHandler.onEnd();});}}++cov_26oab8vg6o.s[14];exports.InfusionProxyRequestHandler=InfusionProxyRequestHandler;