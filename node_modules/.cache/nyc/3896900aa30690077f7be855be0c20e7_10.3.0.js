"use strict";var cov_2ifg0kob1d=function(){var path="C:\\Users\\chadc\\Documents\\git-projects\\infusion\\dist\\test\\onion-test-setup.js",hash="9efc93066a94bc37ce5ccab6a5eb8fbcd79e07e9",global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\chadc\\Documents\\git-projects\\infusion\\dist\\test\\onion-test-setup.js",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:40},end:{line:3,column:118}},"2":{start:{line:4,column:26},end:{line:4,column:96}},"3":{start:{line:5,column:32},end:{line:5,column:94}},"4":{start:{line:6,column:33},end:{line:6,column:96}},"5":{start:{line:7,column:24},end:{line:7,column:92}},"6":{start:{line:8,column:25},end:{line:8,column:57}},"7":{start:{line:9,column:13},end:{line:9,column:17}},"8":{start:{line:11,column:15},end:{line:11,column:45}},"9":{start:{line:14,column:8},end:{line:14,column:82}},"10":{start:{line:17,column:8},end:{line:17,column:53}},"11":{start:{line:18,column:8},end:{line:18,column:135}},"12":{start:{line:19,column:8},end:{line:19,column:114}},"13":{start:{line:20,column:8},end:{line:20,column:33}},"14":{start:{line:21,column:8},end:{line:28,column:10}},"15":{start:{line:29,column:8},end:{line:34,column:10}},"16":{start:{line:35,column:8},end:{line:37,column:10}},"17":{start:{line:38,column:8},end:{line:38,column:77}},"18":{start:{line:39,column:8},end:{line:39,column:125}},"19":{start:{line:40,column:8},end:{line:40,column:53}},"20":{start:{line:43,column:0},end:{line:43,column:40}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:13,column:4},end:{line:13,column:5}},loc:{start:{line:13,column:18},end:{line:15,column:5}},line:13},"1":{name:"(anonymous_1)",decl:{start:{line:16,column:4},end:{line:16,column:5}},loc:{start:{line:16,column:16},end:{line:41,column:5}},line:16}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0},b:{},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();++cov_2ifg0kob1d.s[0];Object.defineProperty(exports,"__esModule",{value:true});const infusion_context_mssql_writer_1=(++cov_2ifg0kob1d.s[1],require("../src/infusion-server/infrastructure/infusion-context-mssql-writer"));const markup_modifier_1=(++cov_2ifg0kob1d.s[2],require("../src/infusion-server/application-services/markup-modifier"));const infusion_modification_1=(++cov_2ifg0kob1d.s[3],require("../src/infusion-server/domain/infusion-modification"));const infusion_configuration_1=(++cov_2ifg0kob1d.s[4],require("../src/infusion-server/domain/infusion-configuration"));const proxy_service_1=(++cov_2ifg0kob1d.s[5],require("../src/infusion-server/application-services/proxy-service"));const winston_logger_1=(++cov_2ifg0kob1d.s[6],require("../src/winston-logger"));const port=(++cov_2ifg0kob1d.s[7],8001);//const target = 'https://httpbin.org/'
const target=(++cov_2ifg0kob1d.s[8],'http://jccsubweb.newgen.corp');class OnionTestSetup{constructor(){++cov_2ifg0kob1d.f[0];++cov_2ifg0kob1d.s[9];this.configuration=new infusion_configuration_1.InfusionConfiguration();}startTest(){++cov_2ifg0kob1d.f[1];++cov_2ifg0kob1d.s[10];this.log=new winston_logger_1.WinstonLog();++cov_2ifg0kob1d.s[11];this.writerConfig=new infusion_context_mssql_writer_1.InfusionContextMssqlWriterConfig('dev','usg','localhost','usproxy');++cov_2ifg0kob1d.s[12];this.writer=new infusion_context_mssql_writer_1.InfusionContextMssqlWriter(this.log,this.writerConfig);++cov_2ifg0kob1d.s[13];this.writer.initialize();++cov_2ifg0kob1d.s[14];this.configuration.modifications=[//new InfusionModification('h1','<h1>Replaced Title!!</h1>',InfusionModificationType.Replace,/.*/)
new infusion_modification_1.InfusionModification('body',//      `<script type="text/javascript">window.addEventListener('load', function() {alert('load');})</script>`,
`<script type="text/javascript" src="./src/infusions/firsttest.js"></script>`,//../infusions/firsttest.js
infusion_modification_1.InfusionModificationType.Append,/(http?)(\:\/\/)(.*)(\/)(Login)(\.aspx)(.*)/)];++cov_2ifg0kob1d.s[15];this.configuration.irrelevantUrlSubstrings=['pingsession','setwindowclosedtime','checksessionisvalid','uscustomstyles'];++cov_2ifg0kob1d.s[16];this.configuration.irrelevantResponseContentTypes=[/image.*/];++cov_2ifg0kob1d.s[17];this.markupModifier=new markup_modifier_1.MarkupModifier(this.log);++cov_2ifg0kob1d.s[18];this.proxyService=new proxy_service_1.ProxyService(this.log,this.markupModifier,this.writer,this.configuration);++cov_2ifg0kob1d.s[19];this.proxyService.listen(3000,target,port);}}++cov_2ifg0kob1d.s[20];exports.OnionTestSetup=OnionTestSetup;